<div class="wrapper">
  <div class="container workplace-page">
    <div class="row">
      <div class="col">
       <!--    Bande de navigation  -->
       <div>
        <% link_to workplaces_path, class: "btn btn-workplace" do %>
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        <h4>Back to workplaces</h4>
        <% end %>
      </div>
      <!--    People already cheked in  -->
      <div class="already-checking">

      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 col-md-12 col-lg-8 col-xl-8 workplace-info">

      <!--    Photo workplace   -->
      <div class ="workplace-photo">
        <%= image_tag 'http://via.placeholder.com/550x350' %>
      </div>
      <!--    Details infos  -->
      <h3><%= @workplace.name %></h3>
      <h5><%= @workplace.address %></h5>

      <div class="features">
        <ul class="list-unstyled"><% @workplace.features.each do |feature| %>
          <li><%= image_tag(feature.icon) %> <%= feature.name %></li>
          <% end %>
        </ul>
      </div>
      <!--    Ratings  -->
      <div class="ratings">
       <% @reviews.each do |review| %>
       <%= review.global_rating %>
       <% end %>
     </div>
     <!--    Reviews -->
     <div class="reviews">
      <% if @workplace.reviews.nil? %>
      <p>This place doesn't have any review yet. <br/>
        Be the first one to add one :)
      </p>
      <%= link_to "Add a review", new_workplace_review_path %>
      <% else %>
      <%= @workplace.reviews %>
      <% end %>
    </div>
  </div>


  <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4 action-workplace">
    <div class="action-user">
      <div class="action-header">
        <% if @spot.opening_hours.nil? %>
        <div class="led-box">
          <div class="led-yellow"></div>
          <p>Opening hours are not available for this place.</p>
        </div>
        <% elsif @spot.opening_hours["open_now"] %>
        <div class="led-box">
          <div class="led-green"></div>
          <p>OPEN NOW</p>
        </div>
        <% else %>
        <div class="led-box">
          <div class="led-red"></div>
          <p>CLOSED NOW</p>
        </div>
        <% end %>
      </div>
      <div>
        <% if @checkedin_visit == false || @visit.workplace == @workplace %>
          <div id="checkin">
            <%= render 'visits/checkin', visit: @visit, workplace: @workplace %>
          </div>
        <% end %>
      </div>
    </div>
    <div>
      Ratings
    </div>
    <div>
      Add to Favorites
    </div>
    <div>
      Share with friends
    </div>
    <div>
      I'm going
    </div>
  </div>
</div>

</div>
</div>

<div class="row">
  <div class="col">
    <div id="map" style="width: 100%; height: 600px;"></div>
  </div>
</div>
</div>


</div>




<% content_for(:after_js) do %>
<%= javascript_tag do %>
$(document).ready(function() {
var handler = Gmaps.build('Google');
handler.buildMap({ internal: { id: 'map' } }, function() {
markers = handler.addMarkers(<%= raw @hash.to_json %>);
handler.bounds.extendWith(markers);
handler.fitMapToBounds();
if (markers.length == 0) {
handler.getMap().setZoom(2);
} else if (markers.length == 1) {
handler.getMap().setZoom(14);
}
});
});
<% end %>
<% end %>
